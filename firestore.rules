rules_version = '2';

service cloud.firestore {
  match /databases/{database}/documents {
    // Helper function to check if user is authenticated
    function isAuthenticated() {
      return request.auth != null;
    }
    
    // Helper function to check if user is an admin
    function isAdmin() {
      return isAuthenticated() && 
        request.auth.token.email in ['your-admin-email@example.com'];  // Replace with your admin email
    }

    // Settings collection
    match /settings/{document} {
      allow read: true;  // Anyone can read settings
      allow write: if isAdmin();  // Only admins can modify settings
    }

    // Contact form messages
    match /messages/{messageId} {
      allow read: if isAdmin();  // Only admins can read messages
      allow create: if true;     // Anyone can create a message
      allow update, delete: if isAdmin();  // Only admins can update/delete messages
    }

    // Catch-all rule - deny everything else
    match /{document=**} {
      allow read, write: if false;
    }
  }
}